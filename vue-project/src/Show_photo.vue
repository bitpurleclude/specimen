<script setup>
import { onMounted, ref, computed, inject } from 'vue'
import url from '@/photo/背面（原图）.jpg'
import { SVGData } from './data/SVGData';

//图片大小获取
const child = ref(null);
const childRect = ref(null);
onMounted(() => {
  adjustImageSize();
  // 获取元素的边界框
  if (!child.value) {
    console.error('Child element is not available');
  }
  else childRect.value = child.value.getBoundingClientRect();
});
//通过id获取svg的路径
let imgId1={
  imgId : 11
}
let svgDatas = [];
fetch('http://[240c:cd22:138f:dbd:a8e9:781d:f34e:2]:8080/api/GetSVGById' ,{
      method: 'POST', // 或者 'PUT'
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(imgId1),
    }
) // 替换为你的API URL

    .then(response => response.json())
    .then(data => {
      for (let i = 0; i < data.length; i++) {
        svgDatas.push({
          id: data[i].id,
          svgPath:JSON.parse(data[i].svgPath) ,
          svgName: data[i].svgName,
          imageId: data[i].imageId,
          width: data[i].width,
          height: data[i].height,
          description: data[i].description});
      }
      svgDatas=data;
      console.log(data);
    })
    .catch(error => {
      // 在这里处理任何在请求过程中发生的错误
      console.error('Error:', error);
    });
const image_url = ref(url)
const svgData = ref([

  //["M 673 350L 673 350L 674 350L 674 349L 674 348L 674 347L 674 346L 674 345L 675 345L 675 344L 676 343L 676 342L 676 341L 676 340L 677 340L 677 339L 677 338L 677 337L 677 336L 677 335L 677 334L 677 333L 677 332L 677 331L 677 330L 677 329L 677 328L 677 327L 677 326L 677 325L 677 324L 677 323L 676 323L 676 322L 676 321L 676 320L 676 319L 676 318L 676 317L 676 316L 675 316L 675 315L 675 314L 675 313L 675 312L 675 311L 675 310L 674 310L 674 309L 674 308L 674 307L 674 306L 673 306L 673 305L 673 304L 673 303L 673 302L 673 301L 673 300L 673 299L 673 298L 673 297L 673 296L 673 295L 673 294L 673 293L 673 292L 673 291L 673 290L 672 290L 672 289L 672 288L 671 288L 671 287L 671 286L 671 285L 671 284L 670 284L 670 283L 670 282L 670 281L 670 280L 670 279L 670 278L 670 277L 670 276L 670 275L 669 274L 669 273L 669 272L 669 271L 669 270L 669 269L 669 268L 669 267L 669 266L 669 265L 669 264L 669 263L 669 262L 669 261L 669 260L 669 259L 669 258L 669 257L 669 256L 669 255L 669 254L 669 253L 669 252L 669 251L 669 250L 669 249L 669 248L 669 247L 670 246L 670 245L 670 244L 670 243L 670 242L 671 241L 671 240L 671 239L 671 238L 671 237L 672 237L 672 236L 672 235L 672 234L 672 233L 672 232L 672 231L 673 231L 673 230L 673 229L 673 228L 673 227L 674 227L 674 226L 674 225L 674 224L 674 223L 675 223L 675 222L 675 221L 675 220L 675 219L 676 218L 676 217L 676 216L 676 215L 677 215L 677 214L 677 213L 677 212L 678 212L 678 211L 678 210L 679 210L 679 209L 679 208L 679 207L 680 207L 680 206L 680 205L 681 205L 682 204L 682 203L 683 203L 683 202L 684 202L 684 201L 685 201L 685 200L 685 199L 686 199L 686 198L 687 198L 687 197L 688 197L 688 196L 689 196L 689 195L 689 194L 690 194L 690 193L 691 193L 691 192L 691 191L 692 191L 692 190L 692 189L 693 189L 693 188L 693 187L 693 186L 694 186L 694 185L 694 184L 693 184L 693 183L 692 183L 692 182L 691 182L 690 182L 690 181L 689 181L 689 180L 688 180L 687 180L 687 179L 686 179L 686 178L 685 178L 685 177L 684 177L 684 176L 683 176L 683 175L 682 175L 682 174L 681 174L 681 173L 680 173L 679 173L 679 172L 678 172L 678 171L 677 171L 677 170L 676 170L 676 169L 675 169L 675 168L 674 168L 674 167L 674 166L 673 166L 673 165L 672 165L 672 164L 671 164L 671 163L 671 162L 670 162L 670 161L 669 161L 669 160L 668 160L 668 159L 668 158L 667 158L 667 157L 666 157L 666 156L 666 155L 665 155L 665 154L 664 154L 664 153L 663 153L 663 152L 663 153L 662 153L 662 154L 662 155L 661 155L 661 156L 661 157L 660 157L 660 158L 659 159L 659 160L 659 161L 658 161L 658 162L 658 163L 658 164L 657 165L 657 166L 657 167L 657 168L 657 169L 656 169L 656 170L 656 171L 656 172L 656 173L 656 174L 656 175L 656 176L 655 176L 655 177L 655 178L 655 179L 655 180L 654 181L 654 182L 654 183L 654 184L 653 184L 653 185L 653 186L 652 186L 652 187L 652 188L 651 188L 651 189L 651 190L 650 190L 650 191L 649 191L 649 192L 648 192L 648 193L 647 194L 646 194L 646 195L 645 195L 644 195L 644 196L 643 196L 642 196L 641 197L 640 197L 640 198L 639 198L 638 198L 637 199L 636 199L 635 200L 634 200L 633 200L 633 201L 632 201L 631 201L 631 202L 630 202L 629 202L 629 203L 628 203L 627 203L 627 204L 626 204L 625 204L 625 205L 624 205L 623 205L 623 206L 622 206L 621 207L 620 207L 619 207L 619 208L 618 208L 617 208L 617 209L 616 209L 615 209L 615 210L 614 210L 614 211L 613 211L 613 212L 612 212L 612 213L 611 213L 611 214L 610 214L 610 215L 609 215L 608 215L 607 215L 606 215L 605 215L 605 216L 604 216L 603 216L 602 216L 601 216L 601 217L 600 217L 599 217L 599 218L 598 218L 598 219L 598 220L 598 221L 598 222L 599 222L 599 223L 599 224L 599 225L 600 225L 600 226L 600 227L 600 228L 601 228L 601 229L 601 230L 602 230L 602 231L 603 231L 603 232L 604 232L 604 233L 605 233L 605 234L 606 234L 606 235L 607 236L 607 237L 608 237L 608 238L 609 238L 610 239L 611 239L 611 240L 612 240L 612 241L 613 241L 614 242L 614 243L 615 243L 616 243L 616 244L 617 244L 617 245L 618 245L 618 246L 619 246L 619 247L 620 247L 620 248L 621 248L 621 249L 621 250L 622 250L 622 251L 623 252L 623 253L 624 253L 624 254L 625 255L 625 256L 626 256L 626 257L 626 258L 626 259L 627 259L 627 260L 627 261L 628 261L 628 262L 628 263L 629 264L 629 265L 629 266L 630 266L 630 267L 630 268L 631 269L 631 270L 631 271L 631 272L 632 272L 632 273L 632 274L 632 275L 633 275L 633 276L 633 277L 633 278L 634 278L 634 279L 634 280L 635 280L 635 281L 635 282L 635 283L 636 283L 636 284L 636 285L 637 285L 637 286L 637 287L 638 287L 638 288L 638 289L 639 290L 639 291L 640 291L 640 292L 640 293L 641 293L 641 294L 641 295L 642 295L 642 296L 642 297L 643 297L 643 298L 644 298L 644 299L 645 299L 645 300L 645 301L 646 301L 646 302L 647 302L 647 303L 648 304L 648 305L 648 306L 649 306L 649 307L 649 308L 650 308L 650 309L 650 310L 651 310L 651 311L 651 312L 652 312L 652 313L 653 313L 653 314L 653 315L 654 315L 654 316L 654 317L 655 317L 655 318L 655 319L 656 319L 656 320L 656 321L 657 321L 657 322L 657 323L 658 324L 658 325L 658 326L 659 326L 659 327L 659 328L 659 329L 660 329L 660 330L 660 331L 660 332L 660 333L 661 333L 661 334L 661 335L 662 335L 662 336L 662 337L 663 337L 663 338L 664 338L 664 339L 664 340L 665 340L 665 341L 666 341L 666 342L 666 343L 667 343L 667 344L 668 344L 668 345L 669 345L 669 346L 670 346L 670 347L 671 347L 671 348L 672 348L 672 349L 673 349Z"],
  ["M 1 1 L10 1 L10 10 L1 10L 673 350L 674 350L 674 349L 674 348L 674 347L 674 346L 674 345L 675 345L 675 344L 676 343L 676 342L 676 341L 676 340L 677 340L 677 339L 677 338L 677 337L 677 336L 677 335L 677 334L 677 333L 677 332L 677 331L 677 330L 677 329L 677 328L 677 327L 677 326L 677 325L 677 324L 677 323L 676 323L 676 322L 676 321L 676 320L 676 319L 676 318L 676 317L 676 316L 675 316L 675 315L 675 314L 675 313L 675 312L 675 311L 675 310L 674 310L 674 309L 674 308L 674 307L 674 306L 673 306L 673 305L 673 304L 673 303L 673 302L 673 301L 673 300L 673 299L 673 298L 673 297L 673 296L 673 295L 673 294L 673 293L 673 292L 673 291L 673 290L 672 290L 672 289L 672 288L 671 288L 671 287L 671 286L 671 285L 671 284L 670 284L 670 283L 670 282L 670 281L 670 280L 670 279L 670 278L 670 277L 670 276L 670 275L 669 274L 669 273L 669 272L 669 271L 669 270L 669 269L 669 268L 669 267L 669 266L 669 265L 669 264L 669 263L 669 262L 669 261L 669 260L 669 259L 669 258L 669 257L 669 256L 669 255L 669 254L 669 253L 669 252L 669 251L 669 250L 669 249L 669 248L 669 247L 670 246L 670 245L 670 244L 670 243L 670 242L 671 241L 671 240L 671 239L 671 238L 671 237L 672 237L 672 236L 672 235L 672 234L 672 233L 672 232L 672 231L 673 231L 673 230L 673 229L 673 228L 673 227L 674 227L 674 226L 674 225L 674 224L 674 223L 675 223L 675 222L 675 221L 675 220L 675 219L 676 218L 676 217L 676 216L 676 215L 677 215L 677 214L 677 213L 677 212L 678 212L 678 211L 678 210L 679 210L 679 209L 679 208L 679 207L 680 207L 680 206L 680 205L 681 205L 682 204L 682 203L 683 203L 683 202L 684 202L 684 201L 685 201L 685 200L 685 199L 686 199L 686 198L 687 198L 687 197L 688 197L 688 196L 689 196L 689 195L 689 194L 690 194L 690 193L 691 193L 691 192L 691 191L 692 191L 692 190L 692 189L 693 189L 693 188L 693 187L 693 186L 694 186L 694 185L 694 184L 693 184L 693 183L 692 183L 692 182L 691 182L 690 182L 690 181L 689 181L 689 180L 688 180L 687 180L 687 179L 686 179L 686 178L 685 178L 685 177L 684 177L 684 176L 683 176L 683 175L 682 175L 682 174L 681 174L 681 173L 680 173L 679 173L 679 172L 678 172L 678 171L 677 171L 677 170L 676 170L 676 169L 675 169L 675 168L 674 168L 674 167L 674 166L 673 166L 673 165L 672 165L 672 164L 671 164L 671 163L 671 162L 670 162L 670 161L 669 161L 669 160L 668 160L 668 159L 668 158L 667 158L 667 157L 666 157L 666 156L 666 155L 665 155L 665 154L 664 154L 664 153L 663 153L 663 152L 663 153L 662 153L 662 154L 662 155L 661 155L 661 156L 661 157L 660 157L 660 158L 659 159L 659 160L 659 161L 658 161L 658 162L 658 163L 658 164L 657 165L 657 166L 657 167L 657 168L 657 169L 656 169L 656 170L 656 171L 656 172L 656 173L 656 174L 656 175L 656 176L 655 176L 655 177L 655 178L 655 179L 655 180L 654 181L 654 182L 654 183L 654 184L 653 184L 653 185L 653 186L 652 186L 652 187L 652 188L 651 188L 651 189L 651 190L 650 190L 650 191L 649 191L 649 192L 648 192L 648 193L 647 194L 646 194L 646 195L 645 195L 644 195L 644 196L 643 196L 642 196L 641 197L 640 197L 640 198L 639 198L 638 198L 637 199L 636 199L 635 200L 634 200L 633 200L 633 201L 632 201L 631 201L 631 202L 630 202L 629 202L 629 203L 628 203L 627 203L 627 204L 626 204L 625 204L 625 205L 624 205L 623 205L 623 206L 622 206L 621 207L 620 207L 619 207L 619 208L 618 208L 617 208L 617 209L 616 209L 615 209L 615 210L 614 210L 614 211L 613 211L 613 212L 612 212L 612 213L 611 213L 611 214L 610 214L 610 215L 609 215L 608 215L 607 215L 606 215L 605 215L 605 216L 604 216L 603 216L 602 216L 601 216L 601 217L 600 217L 599 217L 599 218L 598 218L 598 219L 598 220L 598 221L 598 222L 599 222L 599 223L 599 224L 599 225L 600 225L 600 226L 600 227L 600 228L 601 228L 601 229L 601 230L 602 230L 602 231L 603 231L 603 232L 604 232L 604 233L 605 233L 605 234L 606 234L 606 235L 607 236L 607 237L 608 237L 608 238L 609 238L 610 239L 611 239L 611 240L 612 240L 612 241L 613 241L 614 242L 614 243L 615 243L 616 243L 616 244L 617 244L 617 245L 618 245L 618 246L 619 246L 619 247L 620 247L 620 248L 621 248L 621 249L 621 250L 622 250L 622 251L 623 252L 623 253L 624 253L 624 254L 625 255L 625 256L 626 256L 626 257L 626 258L 626 259L 627 259L 627 260L 627 261L 628 261L 628 262L 628 263L 629 264L 629 265L 629 266L 630 266L 630 267L 630 268L 631 269L 631 270L 631 271L 631 272L 632 272L 632 273L 632 274L 632 275L 633 275L 633 276L 633 277L 633 278L 634 278L 634 279L 634 280L 635 280L 635 281L 635 282L 635 283L 636 283L 636 284L 636 285L 637 285L 637 286L 637 287L 638 287L 638 288L 638 289L 639 290L 639 291L 640 291L 640 292L 640 293L 641 293L 641 294L 641 295L 642 295L 642 296L 642 297L 643 297L 643 298L 644 298L 644 299L 645 299L 645 300L 645 301L 646 301L 646 302L 647 302L 647 303L 648 304L 648 305L 648 306L 649 306L 649 307L 649 308L 650 308L 650 309L 650 310L 651 310L 651 311L 651 312L 652 312L 652 313L 653 313L 653 314L 653 315L 654 315L 654 316L 654 317L 655 317L 655 318L 655 319L 656 319L 656 320L 656 321L 657 321L 657 322L 657 323L 658 324L 658 325L 658 326L 659 326L 659 327L 659 328L 659 329L 660 329L 660 330L 660 331L 660 332L 660 333L 661 333L 661 334L 661 335L 662 335L 662 336L 662 337L 663 337L 663 338L 664 338L 664 339L 664 340L 665 340L 665 341L 666 341L 666 342L 666 343L 667 343L 667 344L 668 344L 668 345L 669 345L 669 346L 670 346L 670 347L 671 347L 671 348L 672 348L 672 349L 673 349Z"],

  ["M243 342 L242 342 L241 342 L240 342 L240 342 L239 342 L238 342 L237 342 L236 342 L236 342 L235 342 L234 342 L233 342 L232 342 L232 342 L231 342 L231 343 L230 343 L229 343 L228 343 L228 344 L228 344 L227 344 L227 345 L226 345 L225 345 L225 345 L224 345 L224 346 L224 346 L224 347 L223 347 L223 348 L223 349 L222 349 L222 349 L222 350 L222 351 L222 352 L222 353 L222 353 L222 354 L222 355 L222 356 L221 356 L221 357 L221 357 L221 358 L221 359 L221 360 L221 361 L221 361 L221 362 L221 363 L221 364 L221 365 L221 365 L221 366 L221 367 L221 368 L221 369 L221 369 L221 370 L221 371 L221 372 L221 373 L221 373 L221 374 L221 375 L221 376 L221 377 L221 377 L221 378 L221 379 L221 380 L221 381 L221 381 L221 382 L221 383 L221 384 L220 385 L220 385 L220 386 L220 387 L220 388 L220 388 L220 389 L220 389 L220 390 L220 391 L219 391 L219 392 L219 393 L218 393 L218 393 L218 394 L217 394 L217 395 L217 396 L216 396 L216 397 L216 397 L216 398 L216 399 L216 400 L215 400 L215 401 L215 401 L215 402 L215 403 L215 404 L215 405 L215 405 L214 405 L214 406 L214 407 L214 408 L214 409 L214 409 L214 410 L214 411 L214 412 L213 413 L213 413 L213 414 L213 415 L213 416 L213 417 L213 417 L213 418 L213 419 L213 420 L213 421 L213 421 L213 422 L213 423 L213 424 L213 425 L213 425 L213 426 L213 427 L213 428 L213 429 L213 429 L213 430 L213 431 L213 432 L213 433 L214 433 L214 433 L214 434 L215 434 L215 435 L216 435 L216 435 L216 436 L217 436 L218 436 L219 436 L220 436 L220 436 L221 436 L222 436 L222 437 L223 437 L224 437 L224 437 L225 437 L226 437 L226 437 L227 437 L228 437 L228 437 L228 438 L229 438 L230 438 L230 439 L231 439 L232 439 L232 439 L232 440 L233 440 L234 440 L235 440 L236 440 L236 440 L237 440 L238 440 L238 439 L238 438 L238 437 L238 437 L239 437 L239 436 L239 435 L239 434 L239 433 L239 433 L239 432 L239 431 L239 430 L239 429 L239 429 L239 428 L239 427 L239 426 L239 425 L239 425 L239 424 L239 423 L239 422 L239 421 L239 421 L239 420 L239 419 L239 418 L239 417 L239 417 L238 417 L238 416 L238 415 L238 414 L238 413 L238 413 L238 412 L238 411 L238 410 L238 409 L238 409 L238 408 L238 407 L238 406 L238 405 L238 405 L238 404 L238 403 L238 402 L238 401 L238 401 L238 400 L238 399 L238 398 L238 397 L238 397 L238 396 L238 395 L239 395 L239 394 L239 393 L239 393 L239 392 L239 391 L239 390 L240 390 L240 389 L240 389 L240 388 L240 387 L240 387 L240 386 L240 385 L240 385 L241 385 L241 384 L241 383 L241 382 L242 381 L242 381 L242 380 L242 379 L243 379 L243 378 L243 377 L243 377 L244 377 L244 376 L244 375 L244 374 L244 374 L244 373 L244 373 L245 372 L245 371 L245 370 L245 369 L246 369 L246 369 L246 368 L247 368 L247 367 L247 366 L247 365 L248 365 L248 365 L248 364 L248 363 L248 362 L248 361 L248 361 L249 361 L249 360 L249 359 L249 358 L249 357 L249 357 L249 356 L249 355 L249 354 L249 353 L249 353 L249 352 L248 352 L248 351 L248 350 L248 349 L248 349 L248 349 L247 349 L247 348 L247 347 L246 347 L246 346 L245 346 L245 345 L244 345 L244 345 L244 344 L244 344 L243 344 L243 343 L242 343 L242 342 L241 342 L240 342 L240 342 L240 341 L239 341 L238 341 L238 341 L237 341 L236 341 L236 340 L236 340 L236 339 L235 339 L243 342"],
  ["M358 68 L357 68 L357 67 L357 66 L357 65 L356 65 L356 65 L356 64 L356 63 L356 62 L356 61 L356 61 L356 60 L355 60 L355 59 L355 58 L354 58 L354 57 L353 57 L353 57 L352 57 L352 56 L352 56 L352 55 L351 55 L351 54 L350 54 L350 53 L349 53 L348 53 L348 53 L348 53 L348 52 L347 52 L346 52 L345 52 L345 51 L344 51 L344 51 L343 50 L342 50 L341 50 L341 49 L340 49 L340 49 L339 49 L338 49 L337 49 L337 49 L336 49 L336 49 L335 49 L334 49 L333 49 L332 49 L332 48 L332 48 L331 48 L330 48 L329 48 L328 48 L328 48 L327 48 L326 48 L325 48 L324 48 L324 48 L323 48 L322 48 L321 48 L320 48 L320 48 L319 48 L318 48 L318 49 L317 49 L316 49 L316 49 L316 49 L315 49 L315 50 L314 50 L313 50 L313 49 L313 49 L314 49 L314 48 L315 48 L315 47 L316 47 L316 46 L316 45 L316 45 L316 45 L317 45 L317 44 L317 43 L318 43 L319 43 L319 42 L320 41 L320 41 L321 41 L322 41 L323 41 L323 41 L324 41 L324 41 L325 41 L326 41 L327 41 L328 41 L328 40 L328 40 L329 40 L330 40 L331 40 L332 40 L332 40 L333 40 L334 40 L335 40 L336 40 L336 40 L337 40 L338 40 L339 40 L340 41 L340 41 L341 41 L342 41 L343 41 L343 41 L344 41 L344 41 L345 41 L346 41 L347 41 L348 41 L348 42 L348 42 L349 42 L350 42 L350 43 L351 43 L352 43 L352 43 L352 44 L353 44 L354 44 L354 45 L355 45 L355 45 L356 45 L356 46 L356 46 L356 47 L357 47 L357 48 L358 48 L358 49 L359 49 L359 49 L360 49 L360 49 L360 50 L360 51 L361 51 L361 52 L362 52 L362 53 L363 53 L363 53 L363 54 L364 54 L364 55 L364 55 L364 56 L364 57 L365 57 L365 57 L365 58 L366 58 L366 59 L366 60 L366 61 L366 61 L366 62 L366 63 L367 63 L367 64 L367 65 L367 65 L367 66 L367 67 L367 68 L367 69 L367 69 L367 70 L367 71 L367 72 L366 72 L366 73 L365 73 L365 73 L364 73 L364 74 L364 74 L364 75 L364 74 L363 73 L363 73 L362 72 L362 71 L361 70 L361 69 L361 69 L360 69 L360 68 L360 67 L360 67 L360 66 L360 65 L359 65 L359 65 L359 64 L358 64 L358 63 L358 62 L357 62 L356 62 L356 61 L356 61 L355 61 L358 68"],
  ["M257 93 L257 93 L256 93 L256 93 L256 93 L255 93 L255 92 L254 92 L253 92 L253 91 L252 91 L252 90 L252 90 L251 90 L250 90 L250 89 L249 89 L249 89 L248 89 L248 88 L248 88 L248 87 L248 86 L247 86 L247 85 L246 85 L246 85 L246 84 L245 84 L245 83 L245 82 L244 82 L244 81 L244 81 L244 81 L244 80 L244 79 L244 78 L243 78 L243 77 L242 77 L241 77 L241 77 L240 77 L240 77 L240 76 L239 76 L238 76 L237 76 L236 76 L236 76 L236 76 L237 76 L237 75 L238 75 L239 74 L240 74 L240 73 L240 73 L241 73 L241 73 L242 73 L242 72 L243 72 L243 71 L244 71 L244 71 L245 71 L246 71 L247 71 L248 71 L248 71 L249 71 L250 71 L251 71 L252 71 L252 71 L253 71 L254 71 L255 71 L255 70 L256 70 L256 70 L257 70 L257 69 L258 69 L259 69 L260 69 L260 69 L260 69 L260 68 L261 68 L262 68 L262 67 L262 66 L263 66 L263 65 L264 65 L264 65 L264 65 L264 64 L265 64 L265 63 L266 63 L266 62 L267 62 L268 62 L268 62 L269 62 L269 63 L270 63 L271 63 L271 64 L272 64 L272 64 L273 64 L273 65 L274 65 L275 65 L276 65 L276 65 L277 65 L278 65 L279 65 L280 65 L280 65 L281 65 L282 65 L282 65 L282 66 L282 67 L282 68 L282 69 L282 69 L282 70 L282 71 L281 71 L281 72 L281 73 L281 73 L280 73 L280 74 L280 74 L280 75 L279 75 L279 76 L279 77 L278 77 L278 77 L277 77 L277 78 L277 79 L277 80 L277 81 L277 81 L276 81 L276 82 L276 83 L276 84 L276 85 L276 85 L276 86 L276 87 L276 88 L276 89 L276 89 L276 90 L276 91 L276 92 L276 93 L276 93 L276 93 L275 93 L274 93 L273 93 L272 93 L272 93 L272 94 L271 94 L270 94 L269 94 L268 94 L268 94 L267 94 L266 94 L265 94 L265 93 L264 93 L264 93 L264 93 L263 93 L262 93 L262 92 L261 92 L261 91 L260 91 L260 90 L260 90 L259 90 L258 90 L257 90 L256 90 L256 90 L255 90 L254 90 L253 90 L252 90 L257 93"]
])
const svgObjects = ref([]);
for (let i = 0; i < svgData.value.length; i++) {
  svgObjects.value.push(new SVGData(svgData.value[i], false));
}
const imageSize = ref({ left: 0, top: 0, width: 0, height: 0, realWidth: 0, realHeight: 0, xScale: 1, yScale: 1 });
const imgRef = ref(null);
const activeSVGPaths = computed(() => {
  return svgObjects.value.filter(svgObj => svgObj.isOn).map(svgObj => svgObj.svgPath)
});
console.log(activeSVGPaths)
const visible = ref(false);
const tooltipX = ref(0);
const tooltipY = ref(0);
const onMousesvg = (index, event) => {
  svgObjects.value[index].toggle();

  if (!child.value) {
    console.error('Child element is not available');
    return; // 如果元素不可用，则直接返回
  }
  // 设置tooltip的位置
  tooltipX.value = event.clientX - childRect.value.left;
  tooltipY.value = event.clientY - childRect.value.top;

  // 显示tooltip
  visible.value = !visible.value;
};
const outMousesvg = (index) => {
  svgObjects.value[index].toggle();
  visible.value = !visible.value;
};

const adjustImageSize = () => {
  const imgElement = imgRef.value;
  if (imgElement) {
    // 如果图片已加载完成，则直接计算尺寸
    if (imgElement.complete) {
      calculateImageSize(imgElement);
    } else {
      // 否则，设置onload监听器等待图片加载完成
      imgElement.onload = () => {
        calculateImageSize(imgElement);
      };
    }
  }
};
const calculateImageSize = (img) => {
  imageSize.value = {
    width: img.offsetWidth,
    height: img.offsetHeight,
    realWidth: img.naturalWidth,
    realHeight: img.naturalHeight,
    xScale: img.offsetWidth / img.naturalWidth,
    yScale: img.offsetHeight / img.naturalHeight,
    left: img.offsetLeft,
    top: img.offsetTop
  };
};

const getImageCenter = () => {
  return {
    x: this.imageSize.width / 2,
    y: this.imageSize.height / 2,
  };
};

const getSvgCenter = (index) => {
  const svgElement = this.$refs[`svgElementRef-${index}`][0];
  if (svgElement) {
    const { left, top, width, height } = svgElement.getBoundingClientRect();
    return {
      x: left + width / 2,
      y: top + height / 2,
    };
  }
  return null;
};
const props = defineProps({
  svg: {
    type: Number, // 指定props的类型
    required: true, // 是否必填
    default: null // 默认值
  }
});


</script>

<template>
  <div ref="child" class="container" :style="{ position: 'relative' }">
    <!-- 渲染图片 -->
    <img ref="imgRef" :src="image_url" alt="..." width=1250px height=1440px />
    <!-- 渲染SVG，根据imageSize进行缩放和定位 -->
    <!-- 渲染tooltip -->
    <div v-if="visible"
         :style="{ position: 'absolute', top: `${tooltipY}px`, left: `${tooltipX}px`, padding: '10px', background: 'white', border: '1px solid black', borderRadius: '5px', display: 'block' }">
      <span>Tooltip</span>
    </div>
    <svg :width="imageSize.width" :height="imageSize.height" :view-box="`0 0 1250px 1440px`"
      xmlns="http://www.w3.org/2000/svg"
      :style="{ position: 'absolute', left: `${imageSize.left}px`, top: `${imageSize.top}px` }">

      <path v-for="(path, index) in activeSVGPaths" :key="index" :d="path" stroke="black" fill="none" stroke-width="2">
      </path>
      <path v-for="(path, index) in svgData" :key="`overlay-${index}`" :d="path" fill="transparent" fill-opacity="0"
        style="cursor: pointer;" @mouseover="onMousesvg(index, $event)" @mouseout="outMousesvg(index)">
      </path>
    </svg>

  </div>
</template>

<style>
.container {
  display: flex;
  justify-content: center;
  align-items: center;
}
</style>